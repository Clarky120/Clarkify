<div class="container">
  @if (currentUpload$ | async; as upload) {
    <div class="uploading">
      @switch (upload.state) {
        @case ("pending") {
          <p>Starting upload...</p>
        }
        @case ("processing") {
          <p>Uploading... {{ upload.progress }}%</p>
        }
        @case ("error") {
          <p>Error: {{ upload.error }}</p>
          <button (click)="retry()">Retry</button>
        }
      }
    </div>
  } @else {
    <div class="upload">
      <h2>Upload Demo</h2>

      <div class="drop-area" appDropZone (fileDropped)="onFileDropped($event)">
        <p>Drag and drop your file here</p>
        <p>or</p>
        <button (click)="fileInput.click()">Browse</button>
        <input
          type="file"
          #fileInput
          style="display: none"
          (change)="onFileSelected($event)"
        />
      </div>
    </div>
  }
</div>
